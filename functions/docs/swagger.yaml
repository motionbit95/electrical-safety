openapi: "3.0.0"
info:
  title: "ì „ê¸°ì•ˆì „ - Firebase Functions API"
  version: "1.0.0"
  description: |
    ## ğŸš€ Endpoint
    ë°°í¬ê°€ ì™„ë£Œë˜ë©´ ì•„ë˜ ì£¼ì†Œì—ì„œ APIë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    - `https://us-central1-electrical-safety-4c9bd.cloudfunctions.net/api`
      <br>  <br>
    - `https://api-2hj4xnf47q-uc.a.run.app`

paths:
  /auth/signup:
    post:
      tags:
        - Auth
      summary: "íšŒì›ê°€ì…"
      description: "ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ ë“±ë¡í•˜ëŠ” APIì…ë‹ˆë‹¤."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - user_pw
              properties:
                user_id:
                  type: string
                  description: "ì‚¬ìš©ìì˜ ê³ ìœ  ì•„ì´ë””"
                user_pw:
                  type: string
                  description: "ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸"
      responses:
        201:
          description: "íšŒì›ê°€ì… ì„±ê³µ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "íšŒì›ê°€ì… ì„±ê³µ"
        400:
          description: "ì˜ëª»ëœ ìš”ì²­ (user_id ë˜ëŠ” user_pwê°€ ëˆ„ë½ëœ ê²½ìš°)"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1000
                  message:
                    type: string
                    example: "user_idì™€ user_pwë¥¼ ì…ë ¥í•˜ì„¸ìš”."
        409:
          description: "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ì ID"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1001
                  message:
                    type: string
                    example: "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” user_idì…ë‹ˆë‹¤."
        500:
          description: "ì„œë²„ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1002
                  message:
                    type: string
                    example: "íšŒì›ê°€ì… ì¤‘ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."

  /auth/login:
    post:
      tags:
        - Auth
      summary: "ë¡œê·¸ì¸"
      description: "user_idì™€ user_pwë¡œ ë¡œê·¸ì¸í•˜ê³  JWT í† í°ì„ ë°œê¸‰ë°›ëŠ” APIì…ë‹ˆë‹¤."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - user_pw
              properties:
                user_id:
                  type: string
                  description: "ì‚¬ìš©ìì˜ ê³ ìœ  ì•„ì´ë””"
                user_pw:
                  type: string
                  description: "ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸"
      responses:
        200:
          description: "ë¡œê·¸ì¸ ì„±ê³µ (JWT í† í° í¬í•¨)"
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "ë¡œê·¸ì¸ ì„±ê³µ"
                  token:
                    type: string
                    description: "JWT í† í°"
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  lastActiveAt:
                    type: string
                    format: date-time
                    description: "ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì‹œê°„"
                    example: "2025-01-23T12:34:56.789Z"
        400:
          description: "ì˜ëª»ëœ ìš”ì²­ (user_id ë˜ëŠ” user_pwê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŒ)"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1000
                  message:
                    type: string
                    example: "user_idì™€ user_pwë¥¼ ì…ë ¥í•˜ì„¸ìš”."
        404:
          description: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” user_id"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1001
                  message:
                    type: string
                    example: "ì¡´ì¬í•˜ì§€ ì•ŠëŠ” user_idì…ë‹ˆë‹¤."
        401:
          description: "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1003
                  message:
                    type: string
                    example: "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        500:
          description: "ì„œë²„ ì˜¤ë¥˜"
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: -1004
                  message:
                    type: string
                    example: "ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
